!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.promiseful=e()}(this,function(){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),r=function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)},u=function(){function n(){e(this,n)}return t(n,null,[{key:"chunk",value:function(n,e){if(e<=0||e>=n.length)return[n];for(var t=[],r=0;r<n.length;r+=e)t.push(n.slice(r,r+e));return t}},{key:"flatten",value:function(n){var e;return(e=[]).concat.apply(e,r(n))}}]),n}(),o=function(){function r(){e(this,r)}return t(r,null,[{key:"fulfil",value:function(e){return"function"==typeof e?e:"object"===(void 0===e?"undefined":n(e))&&e.then&&"function"==typeof e.then?function(){return e}:function(){return Promise.resolve(e)}}}]),r}(),i={collection:u,internal:o};return function(){function n(){e(this,n)}return t(n,null,[{key:"parallel",value:function(e){return n.all(e)}},{key:"parallelLimit",value:function(e,t){if(t<=e.length)return n.parallel(e);var r=i.collection.chunk(e,t).map(function(e){return function(){return n.parallel(e)}});return n.series(r).then(i.collection.flatten)}},{key:"all",value:function(n){return Promise.all(n.map(function(n){return i.internal.fulfil(n)}).map(function(n){return n()}))}},{key:"race",value:function(n){return n.length<1?Promise.resolve(null):Promise.race(n.map(function(n){return i.internal.fulfil(n)}).map(function(n){return n()}))}},{key:"series",value:function(n){return new Promise(function(e,t){function r(u,o){if(u>=n.length)return void e(o);i.internal.fulfil(n[u])().then(function(n){o.push(n),r(u+1,o)}).catch(t)}r(0,[])})}}]),n}()});
//# sourceMappingURL=promiseful.min.js.map
