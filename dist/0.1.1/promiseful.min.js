!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.promiseful=e()}(this,function(){"use strict";function n(n){function e(n,e){return new a.Promise(function(r,t){e().then(function(e){n.push(e),r(n)}).catch(t)})}return a.reduce(n,e,[])}function e(e,r){var t=c.collection.arrayize(e);return r<=t.length?a.all(t):n(c.collection.chunk(t,r).map(function(n){return function(){return a.all(n)}})).then(c.collection.flatten)}function r(n,e){function r(n,e){return new a.Promise(function(r,t){e(n).then(r).catch(t)})}return a.reduce(n,r,e)}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function n(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}}(),u=function(n){if(Array.isArray(n)){for(var e=0,r=Array(n.length);e<n.length;e++)r[e]=n[e];return r}return Array.from(n)},l=function(){function n(){i(this,n)}return o(n,null,[{key:"arrayize",value:function(n){return Array.isArray(n)?n:Array.from(n)}},{key:"chunk",value:function(e,r){var t=n.arrayize(e);if(r<=0||r>=t.length)return[t];for(var i=[],o=0;o<t.length;o+=r)i.push(t.slice(o,o+r));return i}},{key:"flatten",value:function(n){var e;return(e=[]).concat.apply(e,u(n))}}]),n}(),c={collection:l},f=function(){function n(e){i(this,n),this.Promise=e}return o(n,[{key:"fulfil",value:function(n){var e=this;return"function"==typeof n?n:"object"===(void 0===n?"undefined":t(n))&&n.then&&"function"==typeof n.then?function(){return n}:function(){return e.Promise.resolve(n)}}},{key:"promise",value:function(){return arguments.length>0&&(this.Promise=arguments.length<=0?void 0:arguments[0]),this.Promise}},{key:"promisify",value:function(n){var e=this;return function(){for(var r=arguments.length,t=Array(r),i=0;i<r;i++)t[i]=arguments[i];return new e.Promise(function(e,r){t.push(function(n){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];n?r(n):i.length<=1?e.apply(void 0,i):e(i)}),n.apply(void 0,t)})}}},{key:"all",value:function(n){var e=this;return this.Promise.all(c.collection.arrayize(n).map(function(n){return e.fulfil(n)}).map(function(n){return n()}))}},{key:"race",value:function(n){var e=this,r=c.collection.arrayize(n);return r.length<1?this.Promise.resolve(null):this.Promise.race(r.map(function(n){return e.fulfil(n)}).map(function(n){return n()}))}},{key:"reduce",value:function(n,e,r){var t=c.collection.arrayize(n),i=this;return new this.Promise(function(n,o){function u(r,l){if(r>=t.length)return void n(l);var c=i.fulfil(t[r]);e(l,c,r).then(u.bind(this,r+1)).catch(o)}u(0,r)})}}]),n}(),a=new f("undefined"!=typeof Promise?Promise:null),s={promisify:a.promisify.bind(a),all:a.all.bind(a),race:a.race.bind(a),reduce:a.reduce.bind(a),series:n,parallel:a.all.bind(a),parallelLimit:e,waterfall:r,every:a.all.bind(a),inject:a.reduce.bind(a),fold:a.reduce.bind(a)};return s.promise=function(n){return n?(a.promise(n),s):a.promise()},s});
//# sourceMappingURL=promiseful.min.js.map
